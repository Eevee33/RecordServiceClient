<h2 id="downloading-recordservice-vm">Downloading RecordService VM</h2>

<p>These are the steps to download the RecordService VM.</p>

<ol>
  <li>Install VirtualBox. The VM has been tested to work with VirtualBox version 4.3 on Ubuntu 14.04 and VirtualBox version 5 on OSX 10.9. Download VirtualBox for free at <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a>.</li>
  <li>Clone the recordservice-quickstart repository onto your local disk from <a href="https://github.com/cloudera/recordservice-quickstart">https://github.com/cloudera/recordservice-quickstart</a>.</li>
</ol>

<h2 id="installing-the-recordservice-vm">Installing the RecordService VM</h2>

<p>These are the steps to install the RecordService VM.</p>

<ol>
  <li>In a terminal window, navigate to the root of the RSQuickstart Git repository.</li>
  <li>Run the script <code>install.sh</code>.</li>
</ol>

<p>This script downloads an <code>ova</code> file and loads it into VirtualBox. The script might ask you to enter a password, because it edits your <code>/etc/hosts</code> file to give the VM a stable IP address, <code>quickstart.cloudera</code>. When the script completes, you  have a running VM that functions as a RecordService server.</p>

<h3 id="testing-your-vm-configuration">Testing Your VM Configuration</h3>

<p>Test that the VM is running and IP forwarding is configured properly.</p>

<ol>
  <li>Enter the command <code>ssh cloudera@quickstart.cloudera</code>.</li>
  <li>Enter the password <code>cloudera</code>.</li>
</ol>

<p>If you are unable to ssh to the VM, refer to  <a href="#troubleshooting-the-vm-configuration">Troubleshooting the VM Configuration</a>.</p>

<p>This verifies that you are able to log in to the VM. You can continue to explore the VM, but you should run the commands that follow from your host machine.</p>

<h3 id="configuring-recordservice-environment-variables">Configuring RecordService Environment Variables</h3>

<ol>
  <li>On your host machine, navigate to the root of your RecordServiceClient repository, <code>$RECORD_SERVICE_HOME</code>.</li>
  <li>Run <code>source config.sh</code>.</li>
  <li>Navigate to the <code>recordservice-quickstart</code> directory.</li>
  <li>Run <code>source vm_env.sh</code>.</li>
  <li>Navigate to <code>$RECORD_SERVICE_HOME/java</code>.</li>
  <li>Test your environment with the command <code>mvn test -DargLine="-Duser.name=recordservice"</code></li>
</ol>

<p>The VM is preconfigured with the data needed to execute the tests. The <em>recordservice</em> user has access to the necessary data via Sentry.</p>

<p>To make it faster for you to begin using RecordService, the VM is not secured with LDAP or Kerberos. If you want to change the security configuration, you can add roles in Sentry through <code>impala-shell</code>. If you have <code>impala-shell</code> on your host machine, you can connect to the VM by issuing the following command.</p>

<p><code>
impala-shell -i quickstart.cloudera:21000 -u impala
</code></p>

<p>You can also test this from within <code>impala-shell</code>.</p>

<p><code>
CONNECT quickstart.cloudera:21000;
</code></p>

<h2 id="troubleshooting-the-vm-configuration">Troubleshooting the VM Configuration</h2>

<h3 id="unable-to-ssh-to-the-vm">Unable to ssh to the VM</h3>
<ul>
  <li>Ensure that the ssh daemon is running on your machine.</li>
  <li>Ensure that the RecordService VM is running. In your terminal, enter the command:</li>
</ul>

<p><code>
VBoxManage list runningvms
</code></p>

<ul>
  <li>You should see “rs-demo” listed as a running VM.</li>
</ul>

<h3 id="verify-vm-is-properly-listed-in-etchosts">Verify VM is properly listed in /etc/hosts</h3>

<p>Check that the VM is properly listed in your <code>/etc/hosts</code> file. If you open that file, you should see a line that lists an IP followed by <code>quickstart.cloudera</code>. You can check the VM’s IP with the following command:</p>

<p><code>
VBoxManage guestproperty get rs-demo /VirtualBox/GuestInfo/Net/0/V4/IP
</code></p>

<h3 id="verify-known-hosts">Verify Known Hosts</h3>

<p>If you’ve used a Cloudera QuickStart VM before, it’s possible that your known hosts file already has an entry for <code>quickstart.cloudera</code> registered to a different key. Delete any reference to <code>quickstart.cloudera</code> from your known hosts file, usually found in <code>~/.ssh/known_hosts</code>.</p>

<h2 id="debugging-the-vm">Debugging the VM</h2>

<h3 id="restarting-a-service">Restarting a service</h3>

<p>To restart a service, use the standard RHEL service model.</p>

<p><code>
service &lt;service-name&gt; start|stop|restart
</code></p>

<p>You can view all of the installed services <code>/etc/init.d</code> directory.</p>

<h3 id="debugging-via-logs">Debugging Via Logs</h3>

<p>RecordService logs are in the <code>/var/log/recordservice</code> directory. You can find most service logs in the <code>/var/log</code> directory.</p>

<h3 id="dubugging-via-webpage">Dubugging Via Webpage</h3>

<p>View the RecordService debug page on your host machine at the address <code>quickstart.cloudera:11050</code>.</p>

<h3 id="other-service-variables">Other Service Variables</h3>

<p>To view the default execution environment for a service, look for its file in the <code>/etc/default</code> directory.</p>
