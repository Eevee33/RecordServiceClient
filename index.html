<p>RecordService provides an abstraction layer between compute frameworks and data storage. It provides row- and column-level security, and other advantages as well.</p>

<h2 id="the-motivation">The Motivation</h2>

<p>One of the key aspects of the Hadoop ecosystem is decoupling storage managers (for example, HDFS, Apache HBase) and compute frameworks (for example, MapReduce, Impala, Apache Spark). While this decoupling allows for far greater flexibility — pick the framework that best solves your problem — it leads to more complexity to ensure everything works together seamlessly. Furthermore, as Hadoop becomes an increasingly critical infrastructure component for users, the expectations for compatibility, performance, and security also increase.</p>

<p>RecordService is a new core security layer for Hadoop that sits between the storage managers and compute frameworks in order to provide a unified data access path.</p>

<p><img src="img/unifiedDataAccessPath.png" alt="Unified Data Access Path" height="85%" width="85%" /></p>

<h2 id="the-benefits">The Benefits</h2>

<ul>
  <li>RecordService provides fine-grained data permissions and enforcement across Hadoop.</li>
  <li>Clients work independent of on-disk storage format.</li>
  <li>The unified data access path provides a single place to implement and test file format-related changes.</li>
  <li>Components swap transparently above or below RecordService.</li>
  <li>Performance is boosted via Impala’s optimized scanner, dynamic code generation, and Parquet implementation.</li>
  <li>Existing MapReduce and Spark jobs gain Impala-quality performance.</li>
  <li>RecordService can make projections over original source datasets instead of making copies or subsets.</li>
</ul>

<h2 id="the-design">The Design</h2>

<p>RecordService provides the following services.</p>

<ul>
  <li>RecordServicePlanner — Generates tasks, performs authorization checks, handles metadata access. Called during input split generation. </li>
  <li>RecordServiceWorker — Executes tasks, reads and writes to the storage layer.
    <ul>
      <li>Builds on Impala’s highly optimized I/O scheduler and file parsers.</li>
      <li>Returns rows in a canonical format.</li>
    </ul>
  </li>
  <li>Thrift APIs.</li>
  <li>Client Integration Libraries — Allow easy migration to RecordService.</li>
</ul>

<h3 id="recordservice-mdash-architecture-overview">RecordService — Architecture Overview</h3>
<p><img src="img/RecordServiceArchitectureOverview.png" alt="Record Service Architecture Overview " height="85%" width="85%" /></p>

